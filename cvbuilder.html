<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Modern Dark Resume Builder - Free PDF</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://unpkg.com/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f1f5f9; }
    .resume { width: 210mm; min-height: 297mm; background: white; overflow: hidden; }
    .sidebar { background: #1a1f2e; }
    .progress-bar { height: 6px; background: #333; border-radius: 3px; overflow: hidden; }
    .progress { height: 100%; background: #fff; border-radius: 3px; }
    .text-gray { color: #a0aec0; }
  </style>
</head>
<body class="py-10">

<div class="max-w-7xl mx-auto px-4">
  <h1 class="text-4xl font-bold text-center mb-8 text-center text-gray-800">
    Resume Builder — <span class="text-indigo-600">Dark Elegant Style</span>
  </h1>

  <div class="grid grid-cols-1 xl:grid-cols-2 gap-10">
    <!-- Form -->
    <div class="bg-white rounded-2xl shadow-2xl p-8">
      <form id="form" class="space-y-8">

        <!-- Personal -->
        <div>
          <h3 class="text-xl font-bold text-indigo-600 mb-4">Personal Information</h3>
          <input type="text" data-key="name" placeholder="Full Name" class="w-full border rounded-lg px-4 py-3 mb-3"/>
          <input type="text" data-key="title" placeholder="Job Title (e.g. Graphic Designer)" class="w-full border rounded-lg px-4 py-3 mb-3"/>
          <textarea data-key="profile" rows="4" placeholder="Profile summary..." class="w-full border rounded-lg px-4 py-3"></textarea>
        </div>

        <!-- Contact -->
        <div>
          <h3 class="text-xl font-bold text-indigo-600 mb-4">Contact</h3>
          <input type="email" data-key="email" placeholder="Email" class="w-full border rounded-lg px-4 py-3 mb-3"/>
          <input type="tel" data-key="phone" placeholder="Phone" class="w-full border rounded-lg px-4 py-3 mb-3"/>
          <input type="text" data-key="address" placeholder="Address (New York City)" class="w-full border rounded-lg px-4 py-3 mb-3"/>
          <input type="url" data-key="linkedin" placeholder="LinkedIn URL" class="w-full border rounded-lg px-4 py-3 mb-3"/>
          <input type="url" data-key="twitter" placeholder="Twitter/X URL" class="w-full border rounded-lg px-4 py-3 mb-3"/>
          <input type="url" data-key="instagram" placeholder="Instagram URL" class="w-full border rounded-lg px-4 py-3"/>
        </div>

        <!-- Photo -->
        <div>
          <label class="block font-semibold mb-2">Profile Photo (recommended: square)</label>
          <input type="file" id="photo" accept="image/*" class="w-full"/>
        </div>

        <!-- Experience -->
        <div>
          <div class="flex justify-between mb-4">
            <h3 class="text-xl font-bold text-indigo-600">Experience</h3>
            <button type="button" id="addExp class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm">+ Add</button>
          </div>
          <div id="exp"></div>
        </div>

        <!-- Education -->
        <div>
          <div class="flex justify-between mb-4">
            <h3 class="text-xl font-bold text-indigo-600">Education</h3>
            <button type="button" id="addEdu" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm">+ Add</button>
          </div>
          <div id="edu"></div>
        </div>

        <!-- Skills -->
        <div>
          <h3 class="text-xl font-bold text-indigo-600 mb-4">Skills (one per line, e.g. Photoshop 90)</h3>
          <textarea data-key="skills" rows="6" placeholder="Photoshop 95&#10;Illustrator 85&#10;After Effects 80&#10;Figma 90" class="w-full border rounded-lg px-4 py-3"></textarea>
        </div>

        <!-- Languages -->
        <div>
          <h3 class="text-xl font-bold text-indigo-600 mb-4">Languages (Name Level%)</h3>
          <textarea data-key="languages" rows="4" placeholder="English 100&#10;Spanish 70&#10;French 40" class="w-full border rounded-lg px-4 py-3"></textarea>
        </div>

      </form>
    </div>

    <!-- Preview + Download -->
    <div class="space-y-6">
      <button id="download" class="w-full bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold text-xl py-5 rounded-xl shadow-lg hover:shadow-2xl transition">
        Download PDF
      </button>

      <div id="preview" class="resume mx-auto shadow-2xl"></div>
    </div>
  </div>
</div>

<script>
  const { jsPDF } = window.jspdf;
  let photoURL = '';

  document.getElementById('photo').onchange = e => {
    if (e.target.files[0]) photoURL = URL.createObjectURL(e.target.files[0]);
    render();
  };

  // Add Experience
  document.getElementById('addExp').onclick = () => {
    const div = document.createElement('div');
    div.className = "border border-gray-300 rounded-lg p-4 mb-4 bg-gray-50";
    div.innerHTML = `
      <input placeholder="Job Title" class="w-full mb-2 px-3 py-2 border rounded"/>
      <input placeholder="Company" class="w-full mb-2 px-3 py-2 border rounded"/>
      <input placeholder="Years (e.g. 2020 – 2023)" class="w-full mb-2 px-3 py-2 border rounded"/>
      <textarea placeholder="Description..." rows="3" class="w-full px-3 py-2 border rounded"></textarea>
      <button type="button" class="text-red-600 text-sm mt-2 remove">Remove</button>`;
    document.getElementById('exp').appendChild(div);
  };

  // Add Education
  document.getElementById('addEdu').onclick = () => {
    const div = document.createElement('div');
    div.className = "border border-gray-300 rounded-lg p-4 mb-4 bg-gray-50";
    div.innerHTML = `
      <input placeholder="Degree" class="w-full mb-2 px-3 py-2 border rounded"/>
      <input placeholder="University" class="w-full mb-2 px-3 py-2 border rounded"/>
      <input placeholder="Years" class="w-full mb-2 px-3 py-2 border rounded"/>
      <button type="button" class="text-red-600 text-sm mt-2 remove">Remove</button>`;
    document.getElementById('edu').appendChild(div);
  };

  // Remove buttons
  document.addEventListener('click', e => {
    if (e.target.classList.contains('remove')) e.target.parentElement.remove();
  });

  const getData = () => {
    const data = {};
    document.querySelectorAll('[data-key]').forEach(el => data[el.dataset.key] = el.value);
    return data;
  };

  const render = () => {
    const d = getData();

    // Experience
    const expHTML = Array.from(document.querySelectorAll('#exp > div')).map(block => {
      const inputs = block.querySelectorAll('input, textarea');
      return `
        <div class="mb-6">
          <h4 class="font-bold text-gray-800">${inputs[0].value || 'Senior Designer'}</h4>
          <p class="text-sm text-gray-600">\( {inputs[1].value || 'Company'} <span class="mx-2">•</span> \){inputs[2].value || '2020 – 2023'}</p>
          <p class="text-sm mt-2 text-gray-700">${inputs[3].value.replace(/\n/g, '<br>') || 'Description here...'}</p>
        </div>`;
    }).join('');

    // Education
    const eduHTML = Array.from(document.querySelectorAll('#edu > div')).map(block => {
      const inputs = block.querySelectorAll('input');
      return `
        <div class="mb-5">
          <h4 class="font-bold">${inputs[0].value || 'Bachelor in Design'}</h4>
          <p class="text-sm text-gray-600">\( {inputs[1].value || 'University'} | \){inputs[2].value || '2016 – 2020'}</p>
        </div>`;
    }).join('');

    // Skills
    const skills = d.skills ? d.skills.split('\n').filter(s => s.trim()) : [];
    const skillsHTML = skills.map(line => {
      const [name, percent = '80'] = line.split(' ');
      return `<div class="flex items-center gap-3 mb-3"><span class="w-28 text-sm">\( {name}</span><div class="flex-1 progress-bar"><div class="progress" style="width: \){percent}%"></div></div></div>`;
    }).join('');

    // Languages
    const langs = d.languages ? d.languages.split('\n').filter(s => s.trim()) : [];
    const langHTML = langs.map(line => {
      const [name, percent = '70'] = line.split(' ');
      return `<div class="flex items-center gap-3 mb-3"><span class="w-24 text-sm">\( {name}</span><div class="flex-1 progress-bar"><div class="progress" style="width: \){percent}%"></div></div></div>`;
    }).join('');

    document.getElementById('preview').innerHTML = `
      <div class="resume grid grid-cols-3 text-sm">
        <!-- Left Sidebar -->
        <div class="sidebar text-white p-12 col-span-1 flex flex-col">
          \( {photoURL ? `<img src=" \){photoURL}" class="w-full rounded-t-3xl object-cover mb-8" style="height:380px"/>` : '<div class="bg-gray-700 h-96 mb-8"></div>'}

          <h1 class="text-5xl font-black mt-8">${d.name || 'Henry Madison'}</h1>
          <p class="text-lg opacity-90 mb-10">${d.title || 'Graphic Designer'}</p>

          ${d.linkedin || d.twitter || d.instagram ? `
          <div class="flex gap-4 text-2xl mb-12">
            ${d.linkedin ? '<i class="fab fa-linkedin"></i>' : ''}
            ${d.twitter ? '<i class="fab fa-twitter"></i>' : ''}
            ${d.instagram ? '<i class="fab fa-instagram"></i>' : ''}
          </div>` : ''}

          <h3 class="text-xl font-bold border-b border-gray-600 pb-3 mb-6">Contact</h3>
          \( {d.email ? `<p class="mb-2"><i class="fas fa-envelope mr-3"></i> \){d.email}</p>` : ''}
          \( {d.phone ? `<p class="mb-2"><i class="fas fa-phone mr-3"></i> \){d.phone}</p>` : ''}
          \( {d.address ? `<p class="mb-8"><i class="fas fa-map-marker-alt mr-3"></i> \){d.address}</p>` : ''}

          \( {langHTML ? `<h3 class="text-xl font-bold border-b border-gray-600 pb-3 mb-6">Languages</h3> \){langHTML}` : ''}
        </div>

        <!-- Right Side -->
        <div class="col-span-2 p-12 bg-gray-50">
          <h3 class="text-2xl font-bold border-b-4 border-gray-800 pb-3 mb-8 inline-block">Profile</h3>
          <p class="text-gray-700 mb-12 leading-relaxed">${d.profile || 'Write your professional summary here...'}</p>

          \( {expHTML ? `<h3 class="text-2xl font-bold border-b-4 border-gray-800 pb-3 mb-8 inline-block">Experience</h3> \){expHTML}` : ''}

          \( {eduHTML ? `<h3 class="text-2xl font-bold border-b-4 border-gray-800 pb-3 mb-8 inline-block">Education</h3> \){eduHTML}` : ''}

          \( {skillsHTML ? `<h3 class="text-2xl font-bold border-b-4 border-gray-800 pb-3 mb-8 inline-block">Expertise</h3> \){skillsHTML}` : ''}
        </div>
      </div>
    `;
  };

  // Live update
  document.getElementById('form').addEventListener('input', render);
  document.addEventListener('click', e => { if (e.target.classList.contains('remove')) { e.target.parentElement.remove(); render(); } });

  // Download PDF
  document.getElementById('download').onclick = async () => {
    const element = document.getElementById('preview').firstElementChild;
    const canvas = await html2canvas(element, { scale: 2 });
    const img = canvas.toDataURL('image/png');
    const pdf = new jsPDF('p', 'mm', 'a4');
    const width = pdf.internal.pageSize.getWidth();
    const height = (canvas.height * width) / canvas.width;
    pdf.addImage(img, 'PNG', 0, 0, width, height);
    pdf.save((getData().name || 'Resume') + '.pdf');
  };

  render(); // initial
</script>
</body>
</html>
