<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern CV Builder - Working 100%</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body { background:#f8f9fa; font-family:system-ui,sans-serif; }
        .header { background:linear-gradient(135deg,#2c3e50,#3498db); color:white; padding:30px 0; }
        .input-form,.cv-preview-container { padding:25px; background:white; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.12); height:calc(100vh-140px); overflow-y:auto; }
        #cv-preview { max-width:8.5in; margin:auto; padding:20px; line-height:1.7; color:#2c3e50; }
        #cv-preview h1 { font-size:2.8rem; font-weight:800; border-bottom:5px solid #3498db; padding-bottom:10px; }
        #cv-preview h3 { background:#ebf3fd; padding:12px 18px; margin:30px 0 15px; border-left:6px solid #3498db; border-radius:0 10px 10px 0; font-size:1.4rem; }
        .contact-info a { color:#3498db; }
        .section-item { margin-bottom:22px; padding-bottom:18px; border-bottom:1px dashed #eee; }
    </style>
</head>
<body>
<header class="header"><div class="container text-center"><h1>Modern CV Builder</h1><p class="lead">Professional resume in minutes</p></div></header>

<div class="container-fluid"><div class="row g-4">
    <div class="col-lg-6"><div class="input-form">
        <h2>Your Information</h2>
        <form id="cv-form">
            <input type="text" class="form-control mb-3" id="name" placeholder="Full Name">
            <input type="text" class="form-control mb-3" id="title" placeholder="Job Title">
            <textarea class="form-control mb-4" id="summary" rows="4" placeholder="Professional summary..."></textarea>

            <h5 class="text-primary">Contact</h5>
            <div class="row g-3 mb-4">
                <div class="col-6"><input type="text" class="form-control" id="phone" placeholder="Phone"></div>
                <div class="col-6"><input type="email" class="form-control" id="email" placeholder="Email"></div>
                <div class="col-6"><input type="url" class="form-control" id="linkedin" placeholder="LinkedIn"></div>
                <div class="col-6"><input type="url" class="form-control" id="github" placeholder="GitHub"></div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary m-0">Experience</h5>
                <button type="button" class="btn btn-outline-primary add-btn" data-target="experience-inputs">+ Add Job</button>
            </div>
            <div id="experience-inputs"></div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary m-0">Education</h5>
                <button type="button" class="btn btn-outline-primary add-btn" data-target="education-inputs">+ Add Degree</button>
            </div>
            <div id="education-inputs"></div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary m-0">Certifications</h5>
                <button type="button" class="btn btn-outline-primary add-btn" data-target="misc-inputs">+ Add Item</button>
            </div>
            <div id="misc-inputs"></div>
        </form>
        <button id="download-pdf-btn" class="btn btn-success btn-lg w-100 mt-4">Download PDF</button>
    </div></div>

    <div class="col-lg-6"><div class="cv-preview-container sticky-top">
        <div id="cv-preview" class="bg-white">
            <h1 id="preview-name">Name</h1>
            <p class="lead text-primary fw-bold" id="preview-title">Title</p>
            <div class="contact-info mb-5" id="contact-preview"></div>
            <h3>Summary</h3><p id="preview-summary"></p>
            <h3 id="exp-header" style="display:none;">Experience</h3><div id="preview-experience"></div>
            <h3 id="edu-header" style="display:none;">Education</h3><div id="preview-education"></div>
            <h3 id="misc-header" style="display:none;">Certifications</h3><div id="preview-misc"></div>
        </div>
    </div></div>
</div></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded',()=>{const u=()=>{document.getElementById('preview-name').textContent=document.getElementById('name').value||'Name';document.getElementById('preview-title').textContent=document.getElementById('title').value||'Title';document.getElementById('preview-summary').textContent=document.getElementById('summary').value||'Summary...';const p=document.getElementById('phone').value,e=document.getElementById('email').value,l=document.getElementById('linkedin').value,g=document.getElementById('github').value;let c='';if(p)c+=`Phone: \( {p}<br>`;if(e)c+=`Email: <a href="mailto: \){e}">\( {e}</a><br>`;if(l)c+=`LinkedIn: <a href=" \){l}">\( {l}</a><br>`;if(g)c+=`GitHub: <a href=" \){g}">\( {g}</a>`;document.getElementById('contact-preview').innerHTML=c;['experience','education','misc'].forEach(s=>{const items=document.querySelectorAll(`# \){s}-inputs .item`);let html='';items.forEach(i=>{const data=Array.from(i.querySelectorAll('input,textarea')).reduce((a,v)=>({...a,[v.dataset.field]:v.value}),{});if(s==='experience'&&data.job)html+=`<div class="section-item"><strong>\( {data.job}</strong> at <strong> \){data.company||'Company'}</strong> <span class="float-end text-muted">\( {data.dates||''}</span> \){data.desc?`<ul class="mt-2">\( {data.desc.split('\n').map(l=>`<li> \){l.replace(/^[-•]\\s*/,'')}</li>`).join('')}</ul>`:''}</div>`;else if(s==='education'&&data.degree)html+=`<div class="section-item"><strong>\( {data.degree}</strong><br><em> \){data.school||'University'}</em> — \( {data.dates||''}</div>`;else if(s==='misc'&&data.title)html+=`<div class="section-item"><strong> \){data.title}</strong><br><small class="text-muted">\( {data.details||''}</small></div>`});document.getElementById(`preview- \){s}`).innerHTML=html;document.getElementById(s.slice(0,3)+'-header').style.display=html?'block':'none'})};document.getElementById('cv-form').addEventListener('input',u);document.addEventListener('click',e=>{if(e.target.classList.contains('add-btn')){const t=e.target.dataset.target;const i=t.includes('experience')?`<div class="item card p-3 mb-3"><button type="button" class="btn-close float-end"></button><input class="form-control mb-2" data-field="job" placeholder="Job Title"><div class="row g-2 mb-2"><div class="col"><input class="form-control" data-field="company" placeholder="Company"></div><div class="col"><input class="form-control" data-field="dates" placeholder="Dates"></div></div><textarea class="form-control" data-field="desc" rows="3" placeholder="Bullets..."></textarea></div>`:t.includes('education')?`<div class="item card p-3 mb-3"><button type="button" class="btn-close float-end"></button><input class="form-control mb-2" data-field="degree" placeholder="Degree"><div class="row g-2"><div class="col-8"><input class="form-control" data-field="school" placeholder="University"></div><div class="col-4"><input class="form-control" data-field="dates" placeholder="Dates"></div></div></div>`:`<div class="item card p-3 mb-3"><button type="button" class="btn-close float-end"></button><input class="form-control mb-2" data-field="title" placeholder="Title"><textarea class="form-control" data-field="details" rows="2" placeholder="Details"></textarea></div>`;document.getElementById(t).insertAdjacentHTML('beforeend',i);u()}if(e.target.classList.contains('btn-close')&&e.target.parentElement.classList.contains('item')){e.target.parentElement.remove();u()}});document.getElementById('download-pdf-btn').onclick=()=>{u();const n=(document.getElementById('name').value||'Resume').replace(/[^a-zA-Z0-9]/g,'_');html2pdf().set({margin:[0.5,0.6,0.5,0.6],filename:`${n}.pdf`,image:{type:'jpeg',quality:0.98},html2canvas:{scale:2,useCORS:true},jsPDF:{unit:'in',format:'letter',orientation:'portrait'}}).from(document.getElementById('cv-preview')).save()};document.querySelector('.add-btn').click()});
</script>
</body>
</html>
