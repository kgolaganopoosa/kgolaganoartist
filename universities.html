<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universities - Coolie Links</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
</head>
<body>
    <!-- Fixed Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">Coolie Links</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="universities.html">Universities</a></li>
                    <li class="nav-item"><a class="nav-link" href="jobs.html">Jobs</a></li>
                    <li class="nav-item"><a class="nav-link" href="cv.html">Create CV</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mt-5 pt-5">
        <h1 class="mb-4">Global Universities Directory</h1>
        <p class="lead">Search for universities by name or country. Over 10,000 institutions worldwide.</p>
        
        <!-- Search Form -->
        <div class="row mb-4">
            <div class="col-md-5">
                <input type="text" id="nameSearch" class="form-control" placeholder="Search by university name...">
            </div>
            <div class="col-md-5">
                <select id="countrySelect" class="form-select">
                    <option value="">All Countries</option>
                </select>
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary w-100" onclick="searchUniversities()">Search</button>
            </div>
        </div>

        <!-- Results -->
        <div id="results" class="row">
            <!-- Universities will be populated here -->
        </div>
    </main>

    <script>
        // Sample data - In a real implementation, fetch from https://raw.githubusercontent.com/Hipo/university-domains-list/master/world_universities_and_domains.json
        const universitiesData = [
            {name: "Harvard University", country: "United States", website: "https://www.harvard.edu"},
            {name: "University of Oxford", country: "United Kingdom", website: "https://www.ox.ac.uk"},
            {name: "University of Tokyo", country: "Japan", website: "https://www.u-tokyo.ac.jp"},
            {name: "ETH Zurich", country: "Switzerland", website: "https://ethz.ch"},
            {name: "University of Melbourne", country: "Australia", website: "https://www.unimelb.edu.au"},
            // Add more sample entries; replace with full fetch in production
            {name: "Sample University 1", country: "Canada", website: "https://example.ca"},
            {name: "Sample University 2", country: "India", website: "https://example.in"},
            // ... (simulate 10000+ by fetching real data)
        ];

        let universities = [...universitiesData];
        let allCountries = [];

        // Initialize countries
        function initCountries() {
            allCountries = [...new Set(universities.map(u => u.country))].sort();
            const select = document.getElementById('countrySelect');
            allCountries.forEach(country => {
                const option = document.createElement('option');
                option.value = country;
                option.textContent = country;
                select.appendChild(option);
            });
        }

        function displayUniversities(unis) {
            const results = document.getElementById('results');
            results.innerHTML = '';
            if (unis.length === 0) {
                results.innerHTML = '<div class="col-12"><p class="text-muted">No universities found.</p></div>';
                return;
            }
            unis.slice(0, 50).forEach(uni => {  // Limit to 50 for demo; remove in production
                const col = document.createElement('div');
                col.className = 'col-md-6 mb-3';
                col.innerHTML = `
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">${uni.name}</h5>
                            <p class="card-text"><strong>Country:</strong> ${uni.country}</p>
                            <a href="${uni.website}" target="_blank" class="btn btn-primary">Visit Website</a>
                        </div>
                    </div>
                `;
                results.appendChild(col);
            });
            if (unis.length > 50) {
                const more = document.createElement('div');
                more.className = 'col-12';
                more.innerHTML = `<p class="text-muted">Showing 50 of ${unis.length} results. <a href="#" onclick="displayAll()">Show More</a></p>`;
                results.appendChild(more);
            }
        }

        function searchUniversities() {
            const nameQuery = document.getElementById('nameSearch').value.toLowerCase();
            const countryQuery = document.getElementById('countrySelect').value;
            let filtered = universities.filter(u => 
                u.name.toLowerCase().includes(nameQuery) &&
                (!countryQuery || u.country === countryQuery)
            );
            displayUniversities(filtered);
        }

        function displayAll() {
            displayUniversities(universities);
        }

        // Real data fetch (uncomment and use in production)
        /*
        fetch('https://raw.githubusercontent.com/Hipo/university-domains-list/master/world_universities_and_domains.json')
            .then(response => response.json())
            .then(data => {
                universities = data.map(item => ({
                    name: item.name,
                    country: item.country,
                    website: item.web_pages[0] || ''
                })).filter(u => u.website);
                initCountries();
                displayUniversities(universities);
            });
        */

        // Demo init
        initCountries();
        displayUniversities(universities);

        // Event listeners
        document.getElementById('nameSearch').addEventListener('input', searchUniversities);
        document.getElementById('countrySelect').addEventListener('change', searchUniversities);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
