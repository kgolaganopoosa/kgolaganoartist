<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build Your CV - Coolie Links</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;color:#333;padding-top:80px;}
        .navbar-brand {font-weight:700;font-size:1.9rem;background:linear-gradient(45deg,#00ff88,#00b7ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .card {border-radius:20px;box-shadow:0 15px 35px rgba(0,0,0,0.3);background:white;}
        .btn-download {background:linear-gradient(45deg,#00ff88,#00b7ff);border:none;color:white;font-size:1.3rem;padding:15px 50px;border-radius:50px;}
        #cvPreview {background:white;padding:50px;border-radius:15px;box-shadow:0 20px 40px rgba(0,0,0,0.3);max-width:900px;margin:40px auto;font-family:'Georgia',serif;line-height:1.7;}
        .cv-header {background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:50px;border-radius:12px 12px 0 0;margin:-50px -50px 40px -50px;text-align:center;}
        .cv-header h1 {font-family:'Playfair Display',serif;font-size:3.5rem;margin:0;}
        .cv-section h3 {color:#667eea;border-bottom:3px solid #667eea;padding-bottom:8px;margin-bottom:20px;font-weight:600;}
        .skill-tag {display:inline-block;background:#e0e7ff;color:#667eea;padding:8px 16px;border-radius:50px;margin:5px;font-size:0.9rem;}
        .experience-item, .education-item {border-left:5px solid #667eea;padding-left:20px;margin-bottom:25px;}
        a.back-home {color:#667eea;text-decoration:none;font-weight:600;}
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg fixed-top bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Coolie Links</a>
        <a href="index.html" class="text-white ms-auto">Back to Home</a>
    </div>
</nav>

<div class="container my-5">
    <div class="text-center text-white mb-5">
        <h1 class="display-4">Build Your Professional CV</h1>
        <p class="lead">Fill the form â†’ Download beautiful multi-page PDF instantly</p>
    </div>

    <div class="card p-5">
        <form id="cvForm">
            <!-- All form fields (same as before) -->
            <div class="row g-4">
                <div class="col-12"><h4>Personal Info</h4></div>
                <div class="col-md-6"><input type="text" class="form-control" placeholder="Full Name" id="fullName" required></div>
                <div class="col-md-6"><input type="text" class="form-control" placeholder="Job Title" id="title"></div>
                <div class="col-md-6"><input type="email" class="form-control" placeholder="Email" id="email"></div>
                <div class="col-md-6"><input type="tel" class="form-control" placeholder="Phone" id="phone"></div>
                <div class="col-12"><input type="text" class="form-control" placeholder="City, Country" id="address"></div>
                <div class="col-12"><textarea class="form-control" rows="4" placeholder="Professional Summary" id="summary"></textarea></div>

                <div class="col-12 mt-4"><h4>Education</h4></div>
                <div id="educationContainer">
                    <div class="row g-3 mb-3"><div class="col-md-4"><input type="text" class="form-control" placeholder="Degree"></div><div class="col-md-4"><input type="text" class="form-control" placeholder="University"></div><div class="col-md-3"><input type="text" class="form-control" placeholder="Year"></div><div class="col-md-1"><button type="button" class="btn btn-danger btn-sm remove-edu">X</button></div></div>
                </div>
                <button type="button" class="btn btn-outline-primary" id="addEducation">+ Add Education</button>

                <div class="col-12 mt-4"><h4>Experience</h4></div>
                <div id="experienceContainer">
                    <div class="row g-3 mb-3"><div class="col-md-4"><input type="text" class="form-control" placeholder="Job Title"></div><div class="col-md-4"><input type="text" class="form-control" placeholder="Company"></div><div class="col-md-3"><input type="text" class="form-control" placeholder="Duration"></div><div class="col-md-1"><button type="button" class="btn btn-danger btn-sm remove-exp">X</button></div><div class="col-12"><textarea class="form-control mt-2" rows="3" placeholder="Responsibilities & achievements"></textarea></div></div>
                </div>
                <button type="button" class="btn btn-outline-primary" id="addExperience">+ Add Experience</button>

                <div class="col-12 mt-4"><input type="text" class="form-control" placeholder="Skills (comma separated)" id="skills"></div>
                <div class="col-12 mt-4"><input type="text" class="form-control" placeholder="Languages" id="languages"></div>

                <div class="text-center mt-5">
                    <button type="button" class="btn btn-download" id="generateCV">
                        Download CV as PDF
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<div id="cvPreview" style="display:none;"></div>

<script>
    // Same CV generation code as before (add/remove entries + PDF download)
    document.getElementById('addEducation').onclick = () => document.getElementById('educationContainer').insertAdjacentHTML('beforeend', `<div class="row g-3 mb-3"><div class="col-md-4"><input type="text" class="form-control" placeholder="Degree"></div><div class="col-md-4"><input type="text" class="form-control" placeholder="University"></div><div class="col-md-3"><input type="text" class="form-control" placeholder="Year"></div><div class="col-md-1"><button type="button" class="btn btn-danger btn-sm remove-edu">X</button></div></div>`);

    document.getElementById('addExperience').onclick = () => document.getElementById('experienceContainer').insertAdjacentHTML('beforeend', `<div class="row g-3 mb-3"><div class="col-md-4"><input type="text" class="form-control" placeholder="Job Title"></div><div class="col-md-4"><input type="text" class="form-control" placeholder="Company"></div><div class="col-md-3"><input type="text" class="form-control" placeholder="Duration"></div><div class="col-md-1"><button type="button" class="btn btn-danger btn-sm remove-exp">X</button></div><div class="col-12"><textarea class="form-control mt-2" rows="3" placeholder="Responsibilities & achievements"></textarea></div></div>`);

    document.addEventListener('click', e => { if (e.target.classList.contains('remove-edu') || e.target.classList.contains('remove-exp')) e.target.closest('.row').remove(); });

    document.getElementById('generateCV').onclick = () => {
        const name = document.getElementById('fullName').value || "Your Name";
        const title = document.getElementById('title').value || "Professional";
        const summary = document.getElementById('summary').value || "Dedicated professional seeking global opportunities.";
        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;
        const address = document.getElementById('address').value;
        const skills = document.getElementById('skills').value.split(',').map(s=>s.trim()).filter(Boolean);
        const languages = document.getElementById('languages').value || "English";

        const edu = Array.from(document.querySelectorAll('#educationContainer .row')).map(r => {
            const i = r.querySelectorAll('input');
            return i.length >= 3 ? `<div class="education-item"><strong>\( {i[0].value}</strong><br> \){i[1].value} <small>${i[2].value}</small></div>` : '';
        }).join('');

        const exp = Array.from(document.querySelectorAll('#experienceContainer .row')).map(r => {
            const i = r.querySelectorAll('input');
            const t = r.querySelector('textarea');
            return i.length >= 3 ? `<div class="experience-item"><strong>\( {i[0].value}</strong> at <em> \){i[1].value}</em><br><small>\( {i[2].value}</small><p> \){(t?.value||"").replace(/\n/g,'<br>')}</p></div>` : '';
        }).join('');

        document.getElementById('cvPreview').innerHTML = `
            <div style="padding:20px;">
                <div class="cv-header"><h1>\( {name}</h1><p style="font-size:1.4rem;margin:10px 0 0;"> \){title}</p></div>
                <div style="padding:0 50px;">
                    <div class="row">
                        <div class="col-8">
                            <div class="cv-section"><h3>Summary</h3><p>${summary.replace(/\n/g,'<br>')}</p></div>
                            \( {exp ? `<div class="cv-section"><h3>Experience</h3> \){exp}</div>` : ''}
                            \( {edu ? `<div class="cv-section"><h3>Education</h3> \){edu}</div>` : ''}
                        </div>
                        <div class="col-4">
                            <div class="cv-section"><h3>Contact</h3>\( {email?'<p>Email: '+email+'</p>':''} \){phone?'<p>Phone: '+phone+'</p>':''}${address?'<p>'+address+'</p>':''}</div>
                            \( {skills.length?`<div class="cv-section"><h3>Skills</h3> \){skills.map(s=>`<span class="skill-tag">${s}</span>`).join('')}</div>`:''}
                            <div class="cv-section"><h3>Languages</h3><p>${languages}</p></div>
                        </div>
                    </div>
                </div>
            </div>`;

        html2pdf().set({margin:0.5, filename: `${name.replace(/ /g,'_')}_CV.pdf`, html2canvas:{scale:2}, jsPDF:{format:'a4'}})
            .from(document.getElementById('cvPreview')).save();
    };
</script>
</body>
</html>
