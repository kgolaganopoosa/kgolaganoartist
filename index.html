<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coolie Links - Study & Work Anywhere in the World</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: white;
            --text-primary: #333;
            --text-muted: #6c757d;
            --navbar-bg: rgba(0, 0, 0, 0.85);
            --hero-bg: rgba(255, 255, 255, 0.1);
            --job-gradient: linear-gradient(45deg, #ff6b6b, #feca57);
            --footer-bg: rgba(0,0,0,0.9);
        }
        [data-theme="dark"] {
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --card-bg: #2a2a3a;
            --text-primary: #f8f9fa;
            --text-muted: #adb5bd;
            --navbar-bg: rgba(0, 0, 0, 0.95);
            --hero-bg: rgba(0, 0, 0, 0.3);
            --job-gradient: linear-gradient(45deg, #ee5a52, #f9ca24);
            --footer-bg: rgba(26, 26, 46, 0.9);
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            padding-top: 80px;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        .navbar {
            background: var(--navbar-bg) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .navbar-brand {
            font-weight: 700;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #00ff88, #00b7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-section {
            background: var(--hero-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 60px 20px;
            margin: 30px 0;
            text-align: center;
            color: var(--text-primary);
        }
        .card {
            transition: all 0.3s ease;
            border: none;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            background: var(--card-bg);
            color: var(--text-primary);
        }
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        .university-card {
            margin-bottom: 20px;
        }
        .search-box {
            max-width: 600px;
            margin: 0 auto;
        }
        .job-portal-card {
            background: var(--job-gradient);
            color: white;
        }
        footer {
            background: var(--footer-bg);
            color: #aaa;
            padding: 40px 0;
            margin-top: 80px;
        }
        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: white;
        }
        #loading {
            text-align: center;
            color: white;
            margin: 50px 0;
        }
        .pagination {
            justify-content: center;
            margin-top: 30px;
        }
        .page-item.active .page-link {
            background-color: #00b7ff;
            border-color: #00b7ff;
        }
    </style>
</head>
<body data-theme="light">

<!-- Fixed Floating Navbar -->
<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Coolie Links</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link text-white" href="#universities">Universities</a></li>
                <li class="nav-item"><a class="nav-link text-white" href="#jobs">Job Portals</a></li>
                <li class="nav-item"><a class="nav-link text-white" href="#about">About</a></li>
                <li class="nav-item">
                    <button class="theme-toggle" id="themeToggle" title="Toggle Dark Mode">
                        <i class="bi bi-moon-stars-fill"></i>
                    </button>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<div class="container">
    <div class="hero-section">
        <h1 class="display-4 fw-bold">Coolie Links</h1>
        <p class="lead">Your One-Stop Portal to Study & Work Anywhere in the World</p>
        <p>Search 10,000+ universities by name or country • Apply directly • Find your dream job worldwide</p>
        <div class="search-box mt-4">
            <input type="text" id="globalSearch" class="form-control form-control-lg rounded-pill" placeholder="Search university or country...">
        </div>
    </div>
</div>

<!-- Universities Section -->
<div class="container my-5" id="universities">
    <h2 class="text-center mb-5 text-white">10,000+ Universities & Colleges Worldwide</h2>
    <div class="row">
        <div class="col-lg-4 mb-4">
            <select id="countryFilter" class="form-select form-select-lg mb-3">
                <option value="">All Countries</option>
                <!-- Populated dynamically -->
            </select>
        </div>
        <div class="col-lg-4 mb-4">
            <input type="number" id="perPage" class="form-control" placeholder="Results per page (default 20)" value="20" min="10" max="100">
        </div>
    </div>

    <div id="loading" class="row">
        <div class="col-12">
            <div class="spinner-border text-light" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p>Loading 10,000+ universities... Please wait.</p>
        </div>
    </div>

    <div id="universityList" class="row" style="display: none;"></div>
    <nav aria-label="University pagination">
        <ul class="pagination" id="pagination"></ul>
    </nav>
</div>

<!-- Job Portals Section -->
<div class="container my-5" id="jobs">
    <h2 class="text-center mb-5 text-white">Global Job Portals – Apply Anywhere</h2>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        <!-- Job portals injected by JS -->
    </div>
</div>

<!-- About Section -->
<div class="container my-5" id="about">
    <div class="hero-section">
        <h2>About Coolie Links</h2>
        <p>We believe education and opportunity should have no borders. Coolie Links connects ambitious students and professionals to over 10,000 universities and jobs worldwide — all in one place.</p>
        <p class="fw-bold">Study where you dream. Work where you thrive.</p>
    </div>
</div>

<footer class="text-center">
    <div class="container">
        <p>© 2025 Coolie Links • Made with ❤️ for global dreamers</p>
        <p>No borders. No limits. Just opportunities.</p>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Global Job Portals (unchanged)
const jobPortals = [
    { name: "LinkedIn", url: "https://www.linkedin.com/jobs", icon: "bi-linkedin" },
    { name: "Indeed Worldwide", url: "https://www.indeed.com/worldwide", icon: "bi-globe" },
    { name: "Glassdoor", url: "https://www.glassdoor.com", icon: "bi-building" },
    { name: "Monster", url: "https://www.monster.com", icon: "bi-briefcase" },
    { name: "Naukri (India)", url: "https://www.naukri.com", icon: "bi-search" },
    { name: "Seek (Australia/NZ)", url: "https://www.seek.com.au", icon: "bi-briefcase-fill" },
    { name: "StepStone (Europe)", url: "https://www.stepstone.com", icon: "bi-euro" },
    { name: "CareerJet (150+ countries)", url: "https://www.careerjet.com", icon: "bi-airplane" },
    { name: "ZipRecruiter", url: "https://www.ziprecruiter.com", icon: "bi-lightning" },
    { name: "TotalJobs (UK)", url: "https://www.totaljobs.com", icon: "bi-geo-alt" }
];

// Variables
let universities = [];
let allUniversities = [];
let currentPage = 1;
let perPage = 20;
let filteredUniversities = [];

// Load universities from public API (~10,000 entries)
async function loadUniversities() {
    try {
        const response = await fetch('https://raw.githubusercontent.com/Hipo/university-domains-list/master/world_universities_and_domains.json');
        if (!response.ok) throw new Error('Network error');
        const data = await response.json();

        allUniversities = data
            .filter(uni => uni.web_pages && uni.web_pages.length > 0)
            .map(uni => ({
                name: uni.name,
                country: uni.country,
                website: uni.web_pages[0]
            }));

        universities = [...allUniversities];
        filteredUniversities = [...universities];

        populateCountries();
        renderUniversities();
        document.getElementById('loading').style.display = 'none';
        document.getElementById('universityList').style.display = 'flex';
    } catch (err) {
        console.error(err);
        document.getElementById('loading').innerHTML = `
            <div class="col-12 text-center text-white">
                <h4>Unable to load full database</h4>
                <p>Using sample data instead.</p>
            </div>`;
        // Fallback sample
        universities = filteredUniversities = [
            { name: "Harvard University", country: "United States", website: "https://www.harvard.edu" },
            { name: "University of Oxford", country: "United Kingdom", website: "https://www.ox.ac.uk" },
            { name: "University of Toronto", country: "Canada", website: "https://www.utoronto.ca" }
        ];
        renderUniversities();
    }
}

// Populate country dropdown
function populateCountries() {
    const countries = [...new Set(universities.map(u => u.country))].sort();
    const select = document.getElementById('countryFilter');
    countries.forEach(country => {
        const opt = document.createElement('option');
        opt.value = country;
        opt.textContent = country;
        select.appendChild(opt);
    });
}

// Render university cards (NO FLAGS)
function renderUniversities() {
    const start = (currentPage - 1) * perPage;
    const end = start + perPage;
    const pageData = filteredUniversities.slice(start, end);

    const container = document.getElementById('universityList');
    container.innerHTML = '';

    if (filteredUniversities.length === 0) {
        container.innerHTML = '<div class="col-12 text-center text-white"><h4>No results found.</h4></div>';
        renderPagination(0);
        return;
    }

    pageData.forEach(uni => {
        const card = `
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card university-card h-100">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title mb-2">${uni.name}</h5>
                        <p class="text-muted mb-3"><strong>Country:</strong> ${uni.country}</p>
                        <a href="${uni.website}" target="_blank" class="btn btn-outline-primary mt-auto">
                            Visit Website <i class="bi bi-box-arrow-up-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        `;
        container.innerHTML += card;
    });

    renderPagination(Math.ceil(filteredUniversities.length / perPage));
}

// Pagination
function renderPagination(totalPages) {
    const el = document.getElementById('pagination');
    el.innerHTML = '';

    if (totalPages <= 1) return;

    if (currentPage > 1) {
        el.innerHTML += `<li class="page-item"><a class="page-link" href="#" onclick="changePage(${currentPage-1})">Previous</a></li>`;
    }

    const start = Math.max(1, currentPage - 2);
    const end = Math.min(totalPages, currentPage + 2);
    for (let i = start; i <= end; i++) {
        el.innerHTML += `<li class="page-item ${i === currentPage ? 'active' : ''}">
            <a class="page-link" href="#" onclick="changePage(\( {i})"> \){i}</a>
        </li>`;
    }

    if (currentPage < totalPages) {
        el.innerHTML += `<li class="page-item"><a class="page-link" href="#" onclick="changePage(${currentPage+1})">Next</a></li>`;
    }
}

function changePage(page) {
    currentPage = page;
    renderUniversities();
    window.scrollTo(0, document.getElementById('universities').offsetTop - 100);
}

// Render Job Portals
function renderJobPortals() {
    const container = document.querySelector('#jobs .row');
    jobPortals.forEach(p => {
        container.innerHTML += `
            <div class="col">
                <div class="card job-portal-card text-white h-100 text-center p-4">
                    <i class="bi ${p.icon} display-1 mb-3"></i>
                    <h4>${p.name}</h4>
                    <a href="${p.url}" target="_blank" class="btn btn-light mt-3">
                        Open Portal <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
        `;
    });
}

// Search & Filters
document.getElementById('globalSearch').addEventListener('input', e => {
    const q = e.target.value.toLowerCase();
    filteredUniversities = universities.filter(u =>
        u.name.toLowerCase().includes(q) || u.country.toLowerCase().includes(q)
    );
    currentPage = 1;
    renderUniversities();
});

document.getElementById('countryFilter').addEventListener('change', e => {
    const country = e.target.value;
    filteredUniversities = country ? universities.filter(u => u.country === country) : universities;
    currentPage = 1;
    renderUniversities();
});

document.getElementById('perPage').addEventListener('change', e => {
    perPage = parseInt(e.target.value) || 20;
    currentPage = 1;
    renderUniversities();
});

// Dark Mode Toggle
document.getElementById('themeToggle').addEventListener('click', () => {
    const body = document.body;
    const isDark = body.getAttribute('data-theme') === 'dark';
    const newTheme = isDark ? 'light' : 'dark';
    body.setAttribute('data-theme', newTheme);
    document.querySelector('#themeToggle i').className = newTheme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-stars-fill';
    localStorage.setItem('theme', newTheme);
});

// Load saved theme
const saved = localStorage.getItem('theme') || 'light';
document.body.setAttribute('data-theme', saved);
document.querySelector('#themeToggle i').className = saved === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-stars-fill';

// Initialize
loadUniversities();
renderJobPortals();

</script>
</body>
</html>
