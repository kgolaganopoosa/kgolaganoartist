<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coolie Links - Study & Work Anywhere</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: white;
            --text-primary: #333;
            --text-muted: #6c757d;
            --navbar-bg: rgba(0, 0, 0, 0.85);
            --hero-bg: rgba(255, 255, 255, 0.1);
            --job-gradient: linear-gradient(45deg, #ff6b6b, #feca57);
            --footer-bg: rgba(0,0,0,0.9);
        }
        [data-theme="dark"] {
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --card-bg: #2a2a3a;
            --text-primary: #f8f9fa;
            --text-muted: #adb5bd;
            --navbar-bg: rgba(0, 0, 0, 0.95);
            --hero-bg: rgba(0, 0, 0, 0.3);
            --job-gradient: linear-gradient(45deg, #ee5a52, #f9ca24);
            --footer-bg: rgba(26, 26, 46, 0.9);
        }
        body {font-family: 'Poppins', sans-serif;background:var(--bg-gradient);min-height:100vh;padding-top:80px;color:var(--text-primary);transition:all .3s;}
        .navbar {background:var(--navbar-bg)!important;backdrop-filter:blur(10px);box-shadow:0 4px 15px rgba(0,0,0,.3);}
        .navbar-brand {font-weight:700;font-size:1.8rem;background:linear-gradient(45deg,#00ff88,#00b7ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .hero-section {background:var(--hero-bg);backdrop-filter:blur(10px);border-radius:20px;padding:60px 20px;margin:30px 0;text-align:center;color:var(--text-primary);}
        .card {transition:all .3s;background:var(--card-bg);color:var(--text-primary);border:none;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,.2);}
        .card:hover {transform:translateY(-10px);box-shadow:0 20px 40px rgba(0,0,0,.3);}
        .job-portal-card {background:var(--job-gradient);color:white;}
        footer {background:var(--footer-bg);color:#aaa;padding:40px 0;margin-top:80px;}
        .theme-toggle {background:none;border:none;font-size:1.5rem;color:white;cursor:pointer;}
        #loading {text-align:center;color:white;margin:50px 0;}
        .pagination .page-link {color:#00b7ff;}
        .pagination .page-item.active .page-link {background:#00b7ff;border-color:#00b7ff;color:white;}
    </style>
</head>
<body data-theme="light">

<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Coolie Links</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link text-white" href="#universities">Universities</a></li>
                <li class="nav-item"><a class="nav-link text-white" href="#jobs">Job Portals</a></li>
                <li class="nav-item"><a class="nav-link text-white" href="#about">About</a></li>
                <li class="nav-item">
                    <button class="theme-toggle" id="themeToggle"><i class="bi bi-moon-stars-fill"></i></button>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <div class="hero-section">
        <h1 class="display-4 fw-bold">Coolie Links</h1>
        <p class="lead">Your One-Stop Portal to Study & Work Anywhere in the World</p>
        <p>Search 10,000+ universities • Global job portals • 100% free</p>
        <div class="search-box mt-4">
            <input type="text" id="globalSearch" class="form-control form-control-lg rounded-pill" placeholder="Search university or country...">
        </div>
    </div>
</div>

<div class="container my-5" id="universities">
    <h2 class="text-center mb-5 text-white">10,000+ Universities Worldwide</h2>
    <div class="row">
        <div class="col-lg-4 mb-4">
            <select id="countryFilter" class="form-select form-select-lg"><option value="">All Countries</option></select>
        </div>
        <div class="col-lg-4 mb-4">
            <input type="number" id="perPage" class="form-control" value="20" min="10" max="100" placeholder="Results per page">
        </div>
    </div>

    <div id="loading" class="row">
        <div class="col-12">
            <div class="spinner-border text-light"></div>
            <p>Loading universities...</p>
        </div>
    </div>

    <div id="universityList" class="row" style="display:none;"></div>

    <!-- FIXED PAGINATION WITH NUMBERS + PREVIOUS/NEXT -->
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center mt-4" id="pagination"></ul>
    </nav>
</div>

<div class="container my-5" id="jobs">
    <h2 class="text-center mb-5 text-white">Global Job Portals</h2>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"></div>
</div>

<footer class="text-center">
    <div class="container">
        <p>© 2025 Coolie Links • Made with ❤️ for global dreamers</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const jobPortals = [
    {name:"LinkedIn",url:"https://www.linkedin.com/jobs",icon:"bi-linkedin"},
    {name:"Indeed",url:"https://www.indeed.com/worldwide",icon:"bi-globe"},
    {name:"Glassdoor",url:"https://www.glassdoor.com",icon:"bi-building"},
    {name:"Monster",url:"https://www.monster.com",icon:"bi-briefcase"},
    {name:"Naukri",url:"https://www.naukri.com",icon:"bi-search"},
    {name:"Seek",url:"https://www.seek.com.au",icon:"bi-briefcase-fill"},
    {name:"StepStone",url:"https://www.stepstone.com",icon:"bi-euro"},
    {name:"CareerJet",url:"https://www.careerjet.com",icon:"bi-airplane"},
    {name:"ZipRecruiter",url:"https://www.ziprecruiter.com",icon:"bi-lightning"},
    {name:"TotalJobs",url:"https://www.totaljobs.com",icon:"bi-geo-alt"}
];

let universities = [], filteredUniversities = [], currentPage = 1, perPage = 20;

async function loadUniversities() {
    try {
        const res = await fetch('https://raw.githubusercontent.com/Hipo/university-domains-list/master/world_universities_and_domains.json');
        const data = await res.json();
        universities = data.filter(u => u.web_pages && u.web_pages.length).map(u => ({
            name: u.name,
            country: u.country,
            website: u.web_pages[0]
        }));
        filteredUniversities = [...universities];
        populateCountries();
        renderUniversities();
        document.getElementById('loading').style.display = 'none';
        document.getElementById('universityList').style.display = 'flex';
    } catch (e) {
        document.getElementById('loading').innerHTML = '<p class="text-white">Using sample data (no internet)</p>';
        universities = filteredUniversities = [
            {name:"Harvard University",country:"United States",website:"https://www.harvard.edu"},
            {name:"University of Oxford",country:"United Kingdom",website:"https://www.ox.ac.uk"}
        ];
        renderUniversities();
    }
}

function populateCountries() {
    const set = [...new Set(universities.map(u => u.country))].sort();
    const select = document.getElementById('countryFilter');
    set.forEach(c => {
        const opt = document.createElement('option');
        opt.value = c; opt.textContent = c;
        select.appendChild(opt);
    });
}

function renderUniversities() {
    const start = (currentPage-1)*perPage;
    const end = start + perPage;
    const pageData = filteredUniversities.slice(start, end);
    const container = document.getElementById('universityList');
    container.innerHTML = '';

    if (!pageData.length) {
        container.innerHTML = '<div class="col-12 text-center text-white"><h4>No results</h4></div>';
        renderPagination();
        return;
    }

    pageData.forEach(u => {
        container.innerHTML += `
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">${u.name}</h5>
                        <p class="text-muted"><strong>Country:</strong> ${u.country}</p>
                        <a href="${u.website}" target="_blank" class="btn btn-outline-primary mt-auto">
                            Visit Website <i class="bi bi-box-arrow-up-right"></i>
                        </a>
                    </div>
                </div>
            </div>`;
    });

    renderPagination();
}

// FIXED & CLEAN PAGINATION
function renderPagination() {
    const totalPages = Math.ceil(filteredUniversities.length / perPage);
    const pagination = document.getElementById('pagination');
    pagination.innerHTML = '';

    if (totalPages <= 1) return;

    // Previous
    pagination.innerHTML += `
        <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
            <a class="page-link" href="#" ${currentPage === 1 ? '' : 'onclick="changePage('+(currentPage-1)+')'"}>Previous</a>
        </li>`;

    // Page numbers (show up to 7 buttons intelligently)
    let startPage = Math.max(1, currentPage - 3);
    let endPage = Math.min(totalPages, currentPage + 3);
    if (endPage - startPage < 6) {
        if (currentPage < 4) endPage = Math.min(totalPages, 7);
        else startPage = Math.max(1, totalPages - 6);
    }

    for (let i = startPage; i <= endPage; i++) {
        pagination.innerHTML += `
            <li class="page-item ${i === currentPage ? 'active' : ''}">
                <a class="page-link" href="#" onclick="changePage(\( {i})"> \){i}</a>
            </li>`;
    }

    // Next
    pagination.innerHTML += `
        <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
            <a class="page-link" href="#" ${currentPage === totalPages ? '' : 'onclick="changePage('+(currentPage+1)+')'"}>Next</a>
        </li>`;
}

function changePage(page) {
    currentPage = page;
    renderUniversities();
    window.scrollTo({top: document.getElementById('universities').offsetTop - 100, behavior: 'smooth'});
}

// Filters & Search
document.getElementById('globalSearch').addEventListener('input', e => {
    const q = e.target.value.toLowerCase();
    filteredUniversities = universities.filter(u => 
        u.name.toLowerCase().includes(q) || u.country.toLowerCase().includes(q)
    );
    currentPage = 1;
    renderUniversities();
});

document.getElementById('countryFilter').addEventListener('change', e => {
    const c = e.target.value;
    filteredUniversities = c ? universities.filter(u => u.country === c) : universities;
    currentPage = 1;
    renderUniversities();
});

document.getElementById('perPage').addEventListener('change', e => {
    perPage = parseInt(e.target.value) || 20;
    currentPage = 1;
    renderUniversities();
});

// Dark mode
document.getElementById('themeToggle').addEventListener('click', () => {
    const isDark = document.body.getAttribute('data-theme') === 'dark';
    const newTheme = isDark ? 'light' : 'dark';
    document.body.setAttribute('data-theme', newTheme);
    document.querySelector('#themeToggle i').className = newTheme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-stars-fill';
    localStorage.setItem('theme', newTheme);
});
const saved = localStorage.getItem('theme') || 'light';
document.body.setAttribute('data-theme', saved);
document.querySelector('#themeToggle i').className = saved === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-stars-fill';

// Job portals
function renderJobPortals() {
    const container = document.querySelector('#jobs .row');
    jobPortals.forEach(p => {
        container.innerHTML += `
            <div class="col">
                <div class="card job-portal-card text-white h-100 text-center p-4">
                    <i class="bi ${p.icon} display-1 mb-3"></i>
                    <h4>${p.name}</h4>
                    <a href="${p.url}" target="_blank" class="btn btn-light mt-3">Open Portal</a>
                </div>
            </div>`;
    });
}

// Init
loadUniversities();
renderJobPortals();
</script>
</body>
</html>
